\section{Pooling-Ebene}

\todo{AveragePooling}

\subsection{Clustering von Graphen}

Pooling-Ebenen des Netzes sollen über das Clustering bzw.\ die logische Zusammenfassung von Knoten realisiert werden.

Anforderungen:

\begin{itemize}
  \item mehrstufiges Clustering von Graphen für mehrere Pooling-Ebenen
  \item Reduzierung der Knotenanzahl soll den Blick auf einen Graphen bei unterschiedlichen Auflösungen zeigen
  \item Cluster-Algorithmen, die die Größe eines Graphen um den Faktor zwei für jede Anwendung reduzieren erlauben eine feine Kontrolle über die zu benutzenden Pooling-Größen.
  \item effiziente Approximation, da Graph-Clustering NP-schwer (vgl. 5)
\end{itemize}

Es existieren einige Cluster-Techniken auf Graphen wie das populäre \emph{spektrale Clustering}~\cite{Luxburg}. \todo{brauch ich evtl garnicht}

Dieser erfüllt aber nicht die Voraussetzungen (warum nicht?). Stimmt doch garnicht!!\\
\\

Defferrard et al.~\cite{Defferrard} benutzen für die Pooling-Ebene eines Netzes auf Graphen die \emph{Vergröberungsphase} des mehrstufigen Cluster-Algorithmus \emph{Graclus}~\cite{Dhillon}.
Dabei wird der initiale Graph $G_0$ sukzessive in kleinere Graphen $G_1, G_2, \ldots, G_m$ mit $|\mathcal{V}_0| > |\mathcal{V}_1| > \cdots > |\mathcal{V}_m|$ transformiert.
Für die Transformation von einem Graphen $G_i$ zu einem Graphen $G_{i+1}$ mit kleinerer Knotenanzahl $|\mathcal{V}_{i+1}| < |\mathcal{V}_i|$ werden aus disjunkten Knotenuntermengen von $\mathcal{V}_i$ \emph{Superknoten} für $\mathcal{V}_{i+1}$ gebildet.

Die Auswahl der Untermengen erfolgt gierig.
Die Knoten des Graphen werden als unmarkiert initialisert und zufällig durchlaufen.
Für jeden Knoten $v \in \mathcal{V}_i$, der noch unmarkiert ist, wird ein lokaler, ebenfalls noch unmarkierter, Nachbarschaftsknoten $u \in \mathcal{N}(v)$ nach einer zuvor definierten Strategie bestimmt und $v$ sowie $w$ zu einem Superknoten $v^* := \lbrace v, w \rbrace \in \mathcal{V}_{i+1}$ verschmelzt.
Anschließend werden $v$ und $w$ markiert.
Falls $v$ keinen unmarkierten Nachbarn besitzt, wird $v$ allein als \emph{Singleton}-Superknoten $v^* := \lbrace v \rbrace \in \mathcal{V}_{i+1}$ deklariert und markiert~\cite{Dhillon}.

Strategien für die Nachbarschaftsauswahl basieren üblicherweise auf der Maximierung von $w_{uv}$ oder $w_{uv}\left( \frac{1}{d_u} + \frac{1}{d_v} \right)$ (\emph{Normalized Cut}) \todo{erklären}.

Graclus reduziert die Knotenanzahl eines beliebigen Graphen näherungsweise um die Hälfte, d.h.\ $2 \cdot |\mathcal{V}_{i+1}| \approx |\mathcal{V}_i|$.
Ausnahmen sind zum Beispiel Graphen $G = (\mathcal{V}, \mathcal{E})$ mit $\mathcal{E} = \emptyset$.
In der Praxis zeigt sich jedoch, dass Graclus nur sehr wenige Singleton-Knoten generiert~\cite{Defferrard}.

Nach der spektralen Graphentheorie~\cite{Chung} gilt für Kanten eines Graphen $G = (\mathcal{V}, \mathcal{E})$ nach Verschmelzung von $u$ und $v$ zu $v^*$
\begin{align}
  w_{xv^*} &= w_{xu} + w_{xv}\\
  w_{v^*v^*} &= w_{uu} + w_{vv} + 2w_{uv}
\end{align}
für einen Knoten $x \in \mathcal{V}$, $x \neq v^*$.
Insbesondere gilt für einen Graphen $H$, der auf diese Weise konstruiert wurde, $\lambda_G \leq \lambda_H$, wobei $\lambda_G$, $\lambda_H$ jeweils die ersten Eigenvektoren $\lambda_1$ von $G$ respektive $H$~\cite{Chung}.

\subsubsection{Übertragung auf planare Graphen}

\begin{itemize}
  \item Mittelwert der Positionen wird gebildet (auch gewichtet über $d_i$?)
  \item $\mathcal{E}_{v^*} = \mathcal{E}_u \cup \mathcal{E}_v$ \todo{nur die Kanten, Gewichte werden neu berechnet!}
\end{itemize}

\subsection{Pooling-Operation}

Anhand eines kleineren, vergröberten Graphen $G_{i+1}$ und der eindeutigen Zuweisung von Knoten $u, v \in \mathcal{V}_i$ zu $v^* \in \mathcal{V}_{i+1}$ können nun die Pooling-Operation der Knotenattribute von $\mathcal{V}_{i}$ zu $\mathcal{V}_{i+1}$ definiert werden:

\begin{itemize}
  \item \textbf{Max-Pooling:} $v^* := \max(u, v)$
  \item \textbf{L2-Pooling:} $v^* := \left\| u, v \right\|_2$
\end{itemize}



\subsection{INFORMATIONEN}

Normalized Cut ist daher sinnvoll, dass Kanten als wichtiger gezählt werden, wenn ihre entsprechenden Knoten einen geringen Grad haben, das heißt, von nicht so vielen Knoten abhängen.
DAS MACHT DURCHAUS SINN.

Ebenfalls ist der ganze Prozess randomisiert.
Das heißt wir erreichen bei mehrmaliger Anwendung auf dem gleichen Graphen unterschiedliche Ergebnisse.
Damit ist eine Augmentierung der Daten bereits in der Pooling-Ebene vorhanden.
DAS IST SEHTR GUT
