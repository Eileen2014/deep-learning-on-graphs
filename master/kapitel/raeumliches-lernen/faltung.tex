\section{Räumliche Faltung}
\label{raeumliche_faltung}

\paragraph{Knotenauswahl}
\label{knotenauswahl}

\begin{algorithm}[t]
\centering
\begin{algorithmic}
  \REQUIRE{} Knotenmenge \gls{V}, Färbung $\gls{l} \colon \gls{V} \to \gls{C} \subseteq \gls{R}$, Länge $L \in \gls{N}$, Schrittweite $S \in \gls{N}$
  \ENSURE{} geordnete Knotenmenge $\gls{V}_{\mathrm{out}} \subseteq \gls{V}$ mit $\left|\gls{V}_{\mathrm{out}}\right| \leq l$
  \STATE{} $\gls{V}_\mathrm{out} \leftarrow \left[\,\,\right]$
  \STATE{} $\gls{V}_{\mathrm{sort}} \leftarrow$ Sortiere \gls{V} absteigend \bzgl{} \gls{l}.
  \STATE{} $i, j \leftarrow 1$
  \WHILE{$i < L$}
    \IF{$j \leq \left|\gls{V}_{\mathrm{sort}}\right|$}
      \STATE{} $\gls{V}_{\mathrm{out}}\left[i\right] \leftarrow \gls{V}_{\mathrm{sort}}\left[j\right]$
    \ENDIF{}
    \STATE{} $i \leftarrow i + 1$
    \STATE{} $j \leftarrow j + S$
  \ENDWHILE{}
  \RETURN{$\gls{V}_{\mathrm{out}}$}
\end{algorithmic}
\caption[Knotenauswahl der räumlichen Faltung]{}
\label{alg:knotenauswahl}
\end{algorithm}

\paragraph{Nachbarschaftsgruppierung}
\label{nachbarschaftsgruppierung}

\begin{algorithm}[t]
\centering
\begin{algorithmic}
  \REQUIRE{} Knoten $\gls{v} \in \gls{V}$, Nachbarschaftsgröße $K \in \gls{N}$
  \ENSURE{} Nachbarschaftsmenge $\gls{Neighbor}_{\gls{v}} \subseteq \gls{V}$
  \STATE{} $\gls{Neighbor}_{\gls{v}}, \mathcal{T} \leftarrow \left\{\gls{v}\right\}$
  \WHILE{$\left|\gls{Neighbor}_{\gls{v}}\right| < K$ und $\left|\mathcal{T}\right| > 0$}
    \STATE{} $\mathcal{T} \leftarrow \bigcup_{\gls{v} \in \mathcal{T}} \gls{Neighbor}\left(\gls{v}, 1\right)$
    \STATE{} $\gls{Neighbor}_{\gls{v}} \leftarrow \gls{Neighbor}_{\gls{v}} \cup \mathcal{T}$
  \ENDWHILE{}
  \RETURN{$\gls{Neighbor}_{\gls{v}}$}
\end{algorithmic}
\caption[Nachbarschaftsgruppierung der räumlichen Faltung]{}
\label{alg:knotenauswahl}
\end{algorithm}

\paragraph{Normalisierung}
\label{normalisierung}

\begin{algorithm}[t]
\centering
\begin{algorithmic}
  \REQUIRE{} Graph \gls{G}, Knoten $\gls{v} \in \gls{V}$, Nachbarschaftsmenge $\gls{Neighbor}_{\gls{v}} \subseteq \gls{V}$, Nachbarschaftsgröße $K \in \gls{N}$, Färbung $\gls{l} \colon \gls{V} \to \mathcal{C} \subseteq \gls{R}$
  \ENSURE{} geordnete Nachbarschaftsmenge $\gls{Neighbor}_{\mathrm{out}}$ mit $\left|\gls{Neighbor}_{\mathrm{out}}\right| = K$
  \STATE{} berechne Ordnung $>_{\gls{v}}$, sodass $\gls{v}_i >_{\gls{v}} \gls{v}_j$ \gdw{} $\gls{s}\left(\gls{v}, \gls{v}_i\right) > \gls{s}\left(\gls{v}, \gls{v}_j\right)$ und $\gls{l}\left(\gls{v}_i\right) < \gls{l}\left(\gls{v}_j\right)$ falls $\gls{s}\left(\gls{v}, \gls{v}_i\right) = \gls{s}\left(\gls{v}, \gls{v}_j\right)$.
  \STATE{} $\gls{Neighbor}_{\mathrm{sort}} \leftarrow$ Sortiere $\gls{Neighbor}_{\gls{v}}$ aufsteigend \bzgl{} $>_{\gls{v}}$.
  \IF{$\left|\gls{Neighbor}_{\gls{v}}\right| > K$}
    \STATE{} $\gls{Neighbor}_{\mathrm{sort}} \leftarrow \gls{Neighbor}_{\mathrm{sort}}\left[0:K\right]$
  \ENDIF{}
  \STATE{} $\gls{G}^{\prime} = \left(\gls{V}^{\prime}, \gls{E}^{\prime}\right) \leftarrow$ Generiere Teilgraph aus \gls{G} mit Knotenmenge $\gls{V}^{\prime} \coloneqq \gls{Neighbor}_{\mathrm{sort}} \subseteq \gls{V}$.
  \STATE{} $\gls{Neighbor}_{\mathrm{out}} \leftarrow$ Kanonisiere $\gls{G}^{\prime}$ \bzgl{} $>_{\gls{v}}$ (hebt Gleichheiten in $>_{\gls{v}}$ auf).
  \RETURN{$\gls{Neighbor}_{\mathrm{out}} \cup \left(K - \left|\gls{Neighbor}_{\mathrm{sort}}\right| \text{ Fakeknoten}\right)$}
\end{algorithmic}
\caption[Normalisierungsschritt der räumlichen Faltung]{}
\label{alg:normalisierung}
\end{algorithm}

\input{tikz/raeumliche_faltung}

Nodes of any two graphs should have similar position in the
adjacency matrices iff their structural roles are similar

Canonalisierung wird nur benutzt im Ties zu brechen  LOL

awdawd
